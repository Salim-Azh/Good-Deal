<div class="messagerie">
  <div *ngIf="(authService.user |async);else notLoggedIn">
    <div class="list-group list-group-flush" *ngIf="chats.length > 0; else noChat">
      <div *ngFor="let chat of chats">

        <div routerLink="/chats/{{chat.id}}" class="chat">
          <div class="chat-content">

            <ng-container *ngIf="chat.members.u1Username == user.username; else user1">
              <p class="nameContact">{{chat.members.u2Username}}</p>
            </ng-container>
            <ng-template #user1>
              <p class="nameContact">{{chat.members.u1Username}}</p>
            </ng-template>

            <ng-container *ngIf="chat.lastMessage.sentByUsername == user.username; else notMe">
              <p class="chat-text">Vous : {{chat.lastMessage.messageText}}</p>
            </ng-container>
            <ng-template #notMe>
              <p class="chat-text">{{chat.lastMessage.messageText}}</p>
            </ng-template>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #notLoggedIn>
  <app-sign-in [redirectTo]="path"></app-sign-in>
</ng-template>

<ng-template #noChat>
  Aucune conversation n'a été commencée.
</ng-template>
